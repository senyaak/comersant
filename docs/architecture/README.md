# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Comersant Game Platform

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç C4 –¥–∏–∞–≥—Ä–∞–º–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–ª—è –∏–≥—Ä—ã Comersant (–∞–Ω–∞–ª–æ–≥ –ú–æ–Ω–æ–ø–æ–ª–∏–∏).

## üéØ –ü–æ—á–µ–º—É Mermaid?

–ú—ã –≤—ã–±—Ä–∞–ª–∏ **Mermaid** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:

‚úÖ **GitHub Integration** - –¥–∏–∞–≥—Ä–∞–º–º—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä—è–º–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏  
‚úÖ **–ñ–∏–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö  
‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤  
‚úÖ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç** - –∞–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∏ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è  

## –û–±–∑–æ—Ä C4 Model

C4 Model - —ç—Ç–æ –ø–æ–¥—Ö–æ–¥ –∫ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 4 —É—Ä–æ–≤–Ω—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏:

- **Level 1 - Context**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º
- **Level 2 - Container**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- **Level 3 - Component**: –î–µ—Ç–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **Level 4 - Code**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Å–æ–≤ (–Ω–µ –≤–∫–ª—é—á–µ–Ω –≤ –¥–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç)

## üìä –î–∏–∞–≥—Ä–∞–º–º—ã

### Level 1 - System Context
üìÑ [Context Diagram](01-context.md)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç Comersant Game Platform –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∏–≥—Ä–æ–∫–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∏–≥—Ä—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

**–ö–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**:
- –ò–≥—Ä–æ–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —á–µ—Ä–µ–∑ –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä
- –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–Ω–∞—Ç–∞–º–∏ –∏ –∏–≥—Ä–æ–≤—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### Level 2 - Container Architecture
üìÑ [Container Diagram](02-container.md)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ.

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**:
- **Single Page Application (Angular)**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **API Application (NestJS)**: REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç–∞–º–∏
- **WebSocket Server (Socket.IO)**: –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- **Game Engine**: –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã
- **Static File Server**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:
- Frontend: Angular 16, TypeScript
- Backend: NestJS, Socket.IO
- Communication: HTTPS, WebSocket

### Level 3 - Component Architecture

#### Backend Components
üìÑ [Backend Components](03-component-backend.md)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–µ—Ç–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É NestJS backend.

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏**:
- **App Module**: –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Lobby Module**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏ –∏–≥—Ä–æ–∫–æ–≤
- **Game Module**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∏–≥—Ä–∞–º–∏ –∏ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- **Controllers**: REST endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **Gateways**: WebSocket –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
- **Services**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **Game Engine**: –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–≥—Ä—ã

#### Frontend Components  
üìÑ [Frontend Components](03-component-frontend.md)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É Angular –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**Angular –º–æ–¥—É–ª–∏**:
- **App Module**: –ö–æ—Ä–Ω–µ–≤–æ–π –º–æ–¥—É–ª—å —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π
- **Lobby Module**: –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç–∞–º–∏
- **Game Module**: –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

**–ö–ª—é—á–µ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã**:
- **Lobby Service**: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ `/lobby` namespace
- **Game Service**: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ `/game` namespace
- **Game State Service**: –õ–æ–∫–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã

### Sequence Diagrams
üìÑ [Game Turn Flow](04-sequence-game-flow.md)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä–æ–≤–æ–≥–æ —Ö–æ–¥–∞.

## üèóÔ∏è –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- **Frontend**: –¢–æ–ª—å–∫–æ UI –∏ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **Backend**: –í—Å—è –∏–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **WebSocket**: –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### 2. –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ Lobby –∏ Game —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ Angular –º–æ–¥—É–ª–∏ —Å –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π
- NestJS –º–æ–¥—É–ª–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ backend –∫–æ–¥–∞

### 3. Real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- –î–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö WebSocket namespace: `/lobby` –∏ `/game`
- Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ WebSocket —Å–æ–±—ã—Ç–∏–π

### 4. Type Safety
- –û–±—â–∏–µ TypeScript —Ç–∏–ø—ã –º–µ–∂–¥—É frontend –∏ backend
- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è WebSocket —Å–æ–±—ã—Ç–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ decorators

## üìñ –ö–∞–∫ —á–∏—Ç–∞—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã

### –≠–ª–µ–º–µ–Ω—Ç—ã Mermaid C4
- **–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ —Å –∏–∫–æ–Ω–∫–∞–º–∏**: –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ**: 
  - üîµ –°–∏–Ω–∏–π - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
  - üî¥ –ö—Ä–∞—Å–Ω—ã–π - –º–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
  - üü° –ñ–µ–ª—Ç—ã–π - –∏–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
  - ‚ö´ –°–µ—Ä—ã–π - –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- **–°—Ç—Ä–µ–ª–∫–∏**: –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- **–ü–æ–¥–≥—Ä–∞—Ñ—ã**: –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –£—Ä–æ–≤–Ω–∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
1. **Context**: "–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞?"
2. **Container**: "–ò–∑ —á–µ–≥–æ —Å–æ—Å—Ç–æ–∏—Ç —Å–∏—Å—Ç–µ–º–∞?"
3. **Component**: "–ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤?"

## üöÄ –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∏–∞–≥—Ä–∞–º–º

**–í GitHub**: –î–∏–∞–≥—Ä–∞–º–º—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ `.md` —Ñ–∞–π–ª–æ–≤

**–õ–æ–∫–∞–ª—å–Ω–æ**:
- **VS Code**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ "Mermaid Preview"
- **–ë—Ä–∞—É–∑–µ—Ä**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [Mermaid Live Editor](https://mermaid.live/)

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Backend API Documentation](/docs/backend)
- [Frontend Documentation](/docs/frontend)  
- [Compodoc Documentation](../documentation/)

---

**–ê–≤—Ç–æ—Ä**: –°–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é GitHub Copilot  
**–î–∞—Ç–∞**: –û–∫—Ç—è–±—Ä—å 2025  
**–í–µ—Ä—Å–∏—è**: 2.0 (Mermaid Edition) üßú‚Äç‚ôÄÔ∏è